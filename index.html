<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daily Movie Updates</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #121212;
      color: #f5f5f5;
    }
    header {
      background-color: #e50914;
      padding: 1rem;
      text-align: center;
    }
    h1 {
      margin: 0;
      font-size: 2rem;
    }
    nav {
      background: #1f1f1f;
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      padding: 1rem 0;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      font-weight: bold;
      cursor: pointer;
    }
    nav a:hover {
      color: #e50914;
    }
    .container {
      padding: 2rem;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1.5rem;
    }
    .movie {
      background: #1f1f1f;
      border-radius: 8px;
      padding: 1rem;
      text-align: center;
      position: relative;
    }
    .movie img {
      width: 100%;
      max-width: 300px;
      border-radius: 5px;
      margin-bottom: 0.5rem;
    }
    .movie h2 {
      margin: 0.5rem 0;
      font-size: 1.2rem;
    }
    .download-btn {
      margin-top: 1rem;
      display: inline-block;
      background: #e50914;
      color: white;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 4px;
      font-size: 0.9rem;
      text-decoration: none;
    }
    .view-details-btn {
      margin-top: 0.5rem;
      background: transparent;
      border: 1px solid #e50914;
      color: #e50914;
      padding: 0.3rem 0.7rem;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      font-size: 0.9rem;
      transition: background 0.3s, color 0.3s;
    }
    .view-details-btn:hover {
      background: #e50914;
      color: white;
    }
    .pagination {
      text-align: center;
      margin-top: 2rem;
      grid-column: 1 / -1;
    }
    .pagination button {
      background: #e50914;
      color: white;
      padding: 0.5rem 1.5rem;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      cursor: pointer;
    }
  </style>
  <script type='text/javascript' src='//surprisinglystaunchdemocratic.com/25/d6/b6/25d6b6c1217d9b56ee6ff123193c4ee1.js'></script>
</head>
<body>
  <header>
    <h1>üé¨ Daily Movie Updates</h1>
  </header>

  <nav>
    <a onclick="filterMovies('All')">All</a>
    <a onclick="filterMovies('Hollywood')">Hollywood</a>
    <a onclick="filterMovies('Bollywood')">Bollywood</a>
    <a onclick="filterMovies('Bangla')">Bangla</a>
  </nav>

  <div class="container" id="movie-container"></div>

  <div class="pagination">
    <button id="next-btn">Next</button>
  </div>

  <script>
    const movies = [
      { title: "The Batman", year: "2022", desc: "Batman ventures into Gotham‚Äôs underworld.", category: "Hollywood", img: "https://i.imgur.com/Zi6v09X.jpg", download: "#" },
      { title: "Oppenheimer", year: "2023", desc: "The story of J. Robert Oppenheimer.", category: "Hollywood", img: "https://i.imgur.com/FkJYkAI.jpg", download: "#" },
      { title: "RRR", year: "2022", desc: "Two revolutionaries fight for their country.", category: "Bollywood", img: "https://i.imgur.com/4M7DG9c.jpg", download: "#" },
      { title: "KGF Chapter 2", year: "2022", desc: "Rocky fights oppression at KGF.", category: "Bollywood", img: "https://i.imgur.com/q9RAmnh.jpg", download: "#" },
      { title: "Mirzapur", year: "2018", desc: "A crime thriller in India.", category: "Bangla", img: "https://i.imgur.com/EkKtZzB.jpg", download: "#" },
      { title: "Pushpa", year: "2021", desc: "A laborer rises in a smuggling syndicate.", category: "Bollywood", img: "https://i.imgur.com/XlRfrOl.jpg", download: "#" },
      { title: "Inception", year: "2010", desc: "A thief who steals secrets via dreams.", category: "Hollywood", img: "https://i.imgur.com/Kh9O5AQ.jpg", download: "#" },
      { title: "Dune", year: "2021", desc: "Paul Atreides fights for planet Arrakis.", category: "Hollywood", img: "https://i.imgur.com/V5POslk.jpg", download: "#" },
      { title: "The Dark Knight", year: "2008", desc: "Batman fights Gotham's criminal underworld.", category: "Hollywood", img: "https://i.imgur.com/D2CdrBa.jpg", download: "#" },
      { title: "Jawan", year: "2023", desc: "A man exposes corruption in society.", category: "Bollywood", img: "https://i.imgur.com/CqV8FZP.jpg", download: "#" },
      { title: "Spider-Man: No Way Home", year: "2021", desc: "Peter Parker seeks help from Doctor Strange.", category: "Hollywood", img: "https://i.imgur.com/4bmrrA4.jpg", download: "#" }
    ];

    let currentIndex = 0;
    const limit = 6;
    let filteredMovies = [...movies];
    const container = document.getElementById("movie-container");
    const nextBtn = document.getElementById("next-btn");

    // --- CRITICAL: Define your base path ---
    // If your site is at https://username.github.io/RepoName/
    // const basePath = "/RepoName";
    // If your site is at https://username.github.io/ (repo named username.github.io)
    // const basePath = "";
    const basePath = "/MovieBD99"; // Assuming your repo is MovieBD99

    function generateSlug(title) {
        // This simple slug is used, ensure consistency
        return title.replace(/\s+/g, '-');
    }

    function displayMovies() {
        const nextBatch = filteredMovies.slice(currentIndex, currentIndex + limit);
        // Clear only the movies if paginating, or ensure container is ready for list
        if (currentIndex === 0) { // First page of a list
             // container.innerHTML = ''; // This is handled by filterMovies or showMovieDetails
        }

        nextBatch.forEach((movie) => {
            const div = document.createElement("div");
            div.className = "movie";
            div.innerHTML = `
                <img src="${movie.img}" alt="${movie.title}" />
                <h2>${movie.title}</h2>
                <button class="view-details-btn">View Details</button>
                `;

            const btn = div.querySelector(".view-details-btn");
            btn.addEventListener("click", () => {
                const urlSlug = generateSlug(movie.title);
                // Use basePath for correct URL
                history.pushState({ movieTitle: movie.title }, movie.title, basePath + "/" + urlSlug);
                showMovieDetails(movie.title);
            });
            container.appendChild(div);
        });

        currentIndex += limit;
        if (currentIndex >= filteredMovies.length) {
            nextBtn.style.display = "none";
        } else {
            nextBtn.style.display = "inline-block";
        }
    }

    function updateNavLinks() {
        document.querySelectorAll('nav a').forEach(a => {
            const category = a.textContent; // Assuming textContent is the category name
            a.onclick = (e) => { // Change to event listener for better practice
                e.preventDefault();
                // Navigate to base path for category view
                history.pushState({ filterCategory: category }, "Filter " + category, basePath + "/");
                filterMovies(category);
            };
        });
    }


    function filterMovies(category) {
        container.innerHTML = ''; // Clear for new list
        currentIndex = 0;
        document.title = "Daily Movie Updates - " + category;

        filteredMovies = category === "All"
            ? [...movies]
            : movies.filter(movie => movie.category === category);

        displayMovies(); // This will append movie cards
        // Ensure next button is visible if there are movies to paginate
        if (currentIndex < filteredMovies.length && filteredMovies.length > limit) {
             nextBtn.style.display = "inline-block";
        } else {
             nextBtn.style.display = "none";
        }
    }

    function showMovieDetails(title) {
        container.innerHTML = ''; // Clear for detail view
        nextBtn.style.display = 'none';

        const movie = movies.find(m => m.title === title);
        if (!movie) {
            container.innerHTML = `<p>Movie not found</p>
                                 <button id="backFromNotFound">Back to Movie List</button>`;
            document.getElementById("backFromNotFound").addEventListener("click", () => {
                history.pushState({ filterCategory: 'All' }, "Movie List", basePath + "/");
                filterMovies('All');
            });
            document.title = "Movie Not Found";
            return;
        }

        document.title = movie.title + " - Details";
        const div = document.createElement("div");
        // It's better to have a specific class for single movie detail view for styling
        div.className = "movie-detail-view"; // Example class
        div.style.textAlign = "left"; // Example style override if needed
        div.innerHTML = `
            <img src="${movie.img}" alt="${movie.title}" style="max-width:300px; display:block; margin: 0 auto 1rem auto;" />
            <h2 style="text-align:center;">${movie.title}</h2>
            <p><strong>Release Date:</strong> ${movie.year}</p>
            <p>${movie.desc}</p>
            <a href="${movie.download}" class="download-btn" download>‚¨áÔ∏è Download</a>
        `;

        const backBtn = document.createElement("button");
        backBtn.textContent = "Back to Movie List";
        backBtn.className = "view-details-btn"; // Reuse styling
        backBtn.style.marginTop = "1rem";
        backBtn.style.display = "block"; // Make it block for centering or full width
        backBtn.style.marginLeft = "auto";
        backBtn.style.marginRight = "auto";


        backBtn.addEventListener("click", () => {
            // Go back to the main list URL
            history.pushState({ filterCategory: 'All' }, "Movie List", basePath + "/");
            // You might want to restore the previous filter/page, but 'All' is simpler
            filterMovies('All');
        });

        div.appendChild(backBtn);
        container.appendChild(div);
    }

    window.addEventListener('popstate', (event) => {
        handleRouteChange(event.state);
    });

    function handleRouteChange(state) {
        let relativePath = window.location.pathname;
        // Remove basePath from the beginning of the path
        if (relativePath.startsWith(basePath + '/')) {
            const slug = relativePath.substring(basePath.length + 1);
            if (slug) { // We have a slug, try to show movie details
                let movieTitleToShow = null;
                if (state && state.movieTitle) {
                    movieTitleToShow = state.movieTitle;
                } else {
                    // Fallback: find movie by slug
                    const movieFoundBySlug = movies.find(m => generateSlug(m.title) === slug);
                    if (movieFoundBySlug) {
                        movieTitleToShow = movieFoundBySlug.title;
                    }
                }

                if (movieTitleToShow) {
                    showMovieDetails(movieTitleToShow);
                } else {
                    // Slug in URL but no matching movie or state
                    console.warn("Movie not found for slug:", slug);
                    filterMovies('All'); // Or show a 404 message within the container
                }
                return;
            }
        }
        // If no slug, or path is just the basePath, show list
        // Check state for a filter category
        if (state && state.filterCategory) {
            filterMovies(state.filterCategory);
        } else {
            filterMovies('All');
        }
    }


    function init() {
        updateNavLinks(); // Initialize nav link behavior
        handleRouteChange(history.state); // Handle initial page load based on URL and state
        nextBtn.addEventListener("click", () => {
             displayMovies(); // This is for pagination within a list view
        });
    }

    init();

</script>
  <script type='text/javascript' src='//surprisinglystaunchdemocratic.com/d1/26/cc/d126cc889115577f9acfa2f4b91c68e7.js'></script>
</body>
</html>
